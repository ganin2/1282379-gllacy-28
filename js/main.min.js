let feedbackOverlay=document.querySelector(".modal-overlay"),feedbackPopup=feedbackOverlay.querySelector(".feedback-modal-group"),feedbackLink=document.querySelector(".feedback-link"),feedbackClose=document.querySelector(".feedback-close-button"),form=feedbackOverlay.querySelector("form"),nameField=feedbackOverlay.querySelector("[name=user-id]"),emailField=feedbackOverlay.querySelector("[name=email"),feedbackField=feedbackOverlay.querySelector("[name=feedback]"),isStorageSupport=!0,storageName="",storageEmail="",slides=document.querySelectorAll(".slide"),dots=document.querySelectorAll(".slide-toggle"),wrapper=document.querySelector(".site-wrapper"),wrappers=["site-wrapper-green","site-wrapper-blue","site-wrapper-brown"],index=0;const popupClose=()=>{feedbackPopup.classList.remove("feedback-err"),feedbackPopup.classList.add("feedback-close"),setTimeout(function(){feedbackOverlay.classList.remove("modal-show"),feedbackPopup.classList.remove("feedback-close")},600)};try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function init(){var e=new ymaps.Map("map",{center:[59.93929,30.32944],zoom:16,controls:["zoomControl"]});myPlacemark=new ymaps.Placemark([59.938635,30.323118],{hintContent:"Магазин мороженного Глейси:<br>ул. Большая Конюшенная, 19/8, Санкт-Петербург"},{iconLayout:"default#image",iconImageHref:"img/pin.svg",iconImageSize:[80,140],iconImageOffset:[-40,-140]}),e.geoObjects.add(myPlacemark)}feedbackLink.addEventListener("click",function(e){e.preventDefault(),feedbackOverlay.classList.add("modal-show"),storageName||storageEmail?(nameField.value=storageName,emailField.value=storageEmail,feedbackField.focus()):storageName?(nameField.value=storageName,emailField.focus()):feedbackField.focus(),feedbackField.value=""}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),popupClose()}),window.addEventListener("keydown",function(e){27===e.keyCode&&feedbackOverlay.classList.contains("modal-show")&&(e.preventDefault(),popupClose())}),form.addEventListener("submit",function(e){nameField.value&&emailField.value&&feedbackField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),feedbackPopup.classList.remove("feedback-err"),feedbackPopup.offsetWidth=feedbackPopup.offsetWidth,feedbackPopup.classList.add("feedback-err"))}),ymaps.ready(init);const activeSlide=e=>{for(slide of slides)slide.classList.remove("slide-current");slides[e].classList.add("slide-current")},activeToggle=e=>{for(dot of dots)dot.classList.remove("slide-toggle-current");dots[e].classList.add("slide-toggle-current")},changeWrapper=()=>{for(var e=0;e<wrappers.length;e++)wrapper.classList.remove(wrappers[e]);wrapper.classList.add(wrappers[index])},nextSlide=()=>{index==slides.length-1?prepareCurrentSlide(index=0):prepareCurrentSlide(++index)},prepareCurrentSlide=e=>{activeSlide(e),activeToggle(e),changeWrapper()};dots.forEach((e,a)=>{e.addEventListener("click",()=>{prepareCurrentSlide(index=a),clearInterval(interval)})});const interval=setInterval(nextSlide,2500);